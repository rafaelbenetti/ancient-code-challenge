<div class="sm:flex items-center justify-between my-8 sticky">
  <h1
    class="w-full mb-4 sm:mb-0 sm:w-auto text-3xl text-slate-700 font-semibold text-left"
  >
    List of products
  </h1>
  <button
    class="w-full sm:w-auto flex items-center gap-2 px-4 py-2 bg-pink-600 text-white rounded-full shadow hover:bg-pink-700 transition relative"
  >
    ❤️ Wishlist
    <span
      class="absolute -top-2 -right-2 bg-white text-pink-600 text-xs font-bold px-2 py-0.5 rounded-full border border-pink-600"
    >
      {{ wishlistCount() }}
    </span>
  </button>
</div>

<app-product-filters
  (filtersChanged)="onFiltersChanged($event)"
></app-product-filters>
<div
  class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"
>
  @for (product of products(); track product.id) {
  <div
    class="bg-white rounded-2xl shadow-lg p-4 flex flex-col justify-between h-full"
  >
    <div>
      <img
        [src]="product.images[0]"
        alt="{{ product.title }}"
        class="w-full h-48 object-cover rounded-xl"
      />
      <h2 class="mt-3 text-base sm:text-lg font-bold line-clamp-2">
        {{ product.title }}
      </h2>
      <p class="text-green-600 text-sm sm:text-md font-semibold mt-1">
        ${{ product.price }}
      </p>
    </div>
    <div class="mt-4 flex justify-center">
      <button
        class="w-full px-4 py-2 text-sm sm:text-base rounded-xl font-semibold text-white"
        [class.bg-blue-500]="!isInWishlist(product.id)"
        [class.bg-red-500]="isInWishlist(product.id)"
        (click)="toggleWishlist(product.id)"
      >
        {{
          isInWishlist(product.id) ? "Remove from Wishlist" : "Add to Wishlist"
        }}
      </button>
    </div>
  </div>
  }
</div>
